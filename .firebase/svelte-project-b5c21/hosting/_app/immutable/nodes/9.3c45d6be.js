import{s as ae,v as V,p as J,g as w,c as C,l as ne,h as R,B as N,d as P,i as E,m as oe,k as U,x as K}from"../chunks/scheduler.d83c174e.js";import{S as le,i as ie,d as B,v as re,j as ce,k as ue,m as fe,b as me,t as pe,l as de,e as p,g as r,a as y,n as x,p as he}from"../chunks/index.6e71aa37.js";import{A as te}from"../chunks/AuthCheck.cd7075c0.js";import{u as F,a as I,m as Q,d as W,h as X,j as Y,n as Z,r as $,o as ee}from"../chunks/firebase.dfe6b682.js";const k="src/routes/login/photo/+page.svelte";function q(o){let e,i="Uploading...",u,s;const t={c:function(){e=w("p"),e.textContent=i,u=C(),s=w("progress"),this.h()},l:function(c){e=R(c,"P",{"data-svelte-h":!0}),N(e)!=="svelte-be0b5h"&&(e.textContent=i),u=P(c),s=R(c,"PROGRESS",{class:!0}),E(s).forEach(p),this.h()},h:function(){U(e,k,47,12,1531),r(s,"class","progress progress-info w-56 mt-6"),U(s,k,48,12,1563)},m:function(c,d){y(c,e,d),y(c,u,d),y(c,s,d)},d:function(c){c&&(p(e),p(u),p(s))}};return B("SvelteRegisterBlock",{block:t,id:q.name,type:"if",source:"(43:10) {#if uploading}",ctx:o}),t}function se(o){let e,i="Upload a Profile photo",u,s,t,a,c,d,m,g,A="Pick a file",l,h,j,L,_,D,O,G,f=o[2]&&q(o);const M={c:function(){e=w("h2"),e.textContent=i,u=C(),s=w("form"),t=w("div"),a=w("img"),d=C(),m=w("label"),g=w("span"),g.textContent=A,l=C(),h=w("input"),j=C(),f&&f.c(),L=C(),_=w("a"),D=ne("Finish"),this.h()},l:function(n){e=R(n,"H2",{class:!0,"data-svelte-h":!0}),N(e)!=="svelte-izz9wr"&&(e.textContent=i),u=P(n),s=R(n,"FORM",{class:!0});var v=E(s);t=R(v,"DIV",{class:!0});var b=E(t);a=R(b,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),d=P(b),m=R(b,"LABEL",{for:!0,class:!0});var H=E(m);g=R(H,"SPAN",{class:!0,"data-svelte-h":!0}),N(g)!=="svelte-1xba4c3"&&(g.textContent=A),H.forEach(p),l=P(b),h=R(b,"INPUT",{name:!0,type:!0,class:!0,accept:!0}),j=P(b),f&&f.l(b),b.forEach(p),v.forEach(p),L=P(n),_=R(n,"A",{href:!0,class:!0});var T=E(_);D=oe(T,"Finish"),T.forEach(p),this.h()},h:function(){var n;r(e,"class","card-title"),U(e,k,25,4,754),K(a.src,c=o[1]??((n=o[0])==null?void 0:n.photoURL)??"/user.webp")||r(a,"src",c),r(a,"alt","photoURL"),r(a,"width","256"),r(a,"height","256"),r(a,"class","mx-auto"),U(a,k,29,10,935),r(g,"class","label-text"),U(g,k,37,12,1184),r(m,"for","photoURL"),r(m,"class","label"),U(m,k,36,10,1135),r(h,"name","photoURL"),r(h,"type","file"),r(h,"class","file-input file-input-bordered w-full max-w-xs"),r(h,"accept","image/png, image/jpeg, image/gif, image/webp"),U(h,k,39,10,1257),r(t,"class","form-control w-full max-w-xs my-10 mx-auto text-center"),U(t,k,28,8,856),r(s,"class","max-w-screen-md w-full"),U(s,k,27,4,810),r(_,"href",o[3]),r(_,"class","btn btn-primary"),U(_,k,53,6,1675)},m:function(n,v){y(n,e,v),y(n,u,v),y(n,s,v),x(s,t),x(t,a),x(t,d),x(t,m),x(m,g),x(t,l),x(t,h),x(t,j),f&&f.m(t,null),y(n,L,v),y(n,_,v),x(_,D),O||(G=he(h,"change",o[4],!1,!1,!1,!1),O=!0)},p:function(n,v){var b;v&3&&!K(a.src,c=n[1]??((b=n[0])==null?void 0:b.photoURL)??"/user.webp")&&r(a,"src",c),n[2]?f||(f=q(n),f.c(),f.m(t,null)):f&&(f.d(1),f=null),v&8&&r(_,"href",n[3])},d:function(n){n&&(p(e),p(u),p(s),p(L),p(_)),f&&f.d(),O=!1,G()}};return B("SvelteRegisterBlock",{block:M,id:se.name,type:"slot",source:"(21:0) <AuthCheck>",ctx:o}),M}function z(o){let e,i;e=new te({props:{$$slots:{default:[se]},$$scope:{ctx:o}},$$inline:!0});const u={c:function(){ce(e.$$.fragment)},l:function(t){ue(e.$$.fragment,t)},m:function(t,a){fe(e,t,a),i=!0},p:function(t,[a]){const c={};a&79&&(c.$$scope={dirty:a,ctx:t}),e.$set(c)},i:function(t){i||(me(e.$$.fragment,t),i=!0)},o:function(t){pe(e.$$.fragment,t),i=!1},d:function(t){de(e,t)}};return B("SvelteRegisterBlock",{block:u,id:z.name,type:"component",source:"",ctx:o}),u}function _e(o,e,i){let u,s,t;V(F,"user"),J(o,F,l=>i(5,s=l)),V(I,"userData"),J(o,I,l=>i(0,t=l));let{$$slots:a={},$$scope:c}=e;re("Page",a,[]);let d,m=!1;async function g(l){i(2,m=!0);const h=l.target.files[0];i(1,d=URL.createObjectURL(h));const j=$(Q,`users/${s==null?void 0:s.uid}/profile.png`),L=await ee(j,h),_=await Z(L.ref);await Y(X(W,"users",s.uid),{photoURL:_}),i(2,m=!1)}const A=[];return Object.keys(e).forEach(l=>{!~A.indexOf(l)&&l.slice(0,2)!=="$$"&&l!=="slot"&&console.warn(`<Page> was created with unknown prop '${l}'`)}),o.$capture_state=()=>({AuthCheck:te,user:F,userData:I,storage:Q,db:W,doc:X,updateDoc:Y,getDownloadURL:Z,ref:$,uploadBytes:ee,previewURL:d,uploading:m,upload:g,href:u,$user:s,$userData:t}),o.$inject_state=l=>{"previewURL"in l&&i(1,d=l.previewURL),"uploading"in l&&i(2,m=l.uploading),"href"in l&&i(3,u=l.href)},e&&"$$inject"in e&&o.$inject_state(e.$$inject),o.$$.update=()=>{o.$$.dirty&1&&i(3,u=`/${t==null?void 0:t.username}/edit`)},[t,d,m,u,g]}class Re extends le{constructor(e){super(e),ie(this,e,_e,z,ae,{}),B("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:z.name})}}export{Re as component};
